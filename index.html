<!-- index.html: 기존 내용을 모두 지우고 이 코드로 완전히 교체하세요. -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyejin Yoo | Portfolio</title>
    <link rel="stylesheet" type="text/css" href="./Portpolio_01.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
</head>
<body>

    <div class="wrapper">
        <header class="main-header">
            <div class="logo">
                <img src="./img/yh.png" alt="Logo">
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="#">JIN Portfolio</a></li>
                </ul>
            </nav>
        </header>

        <div class="title_copy">
            <div class="marquee-line"><span>CREATING WITH INTENT</span></div>
            <div class="marquee-line"><span>DESIGNING FOR IMPACT</span></div>
            <div class="marquee-line"><span>DESIGN BY JIN</span></div>
        </div>

        <main class="project-grid">
            <!-- 1행 -->
            <div class="project-item">
                <div class="pr_img"><img src="./img/pr01.jpg"></div>
                <div class="pr_info">CESCO Homepage Renewal<br>2025</div>
                <div class="new_img">
                    <div class="inner"><img src="./img/main1.png"></div>
                    <button type="button" class="btn_close">&#x2715;</button>
                </div>
            </div>
            <div class="project-item">
                <div class="pr_img"><img src="./img/pr02.jpg"></div>
                <div class="pr_info">CESCO Shopping Mall App<br>2025</div>
                <div class="new_img">
                    <div class="inner"><img src="./img/main2.png"></div>
                    <button type="button" class="btn_close">&#x2715;</button>
                </div>
            </div>
            <div class="project-item">
                <div class="pr_img"><img src="./img/pr03.jpg"></div>
                <div class="pr_info">CESCO Digital Guide<br>2025</div>
                <div class="new_img">
                    <div class="inner"><img src="./img/main3.jpg"></div>
                    <button type="button" class="btn_close">&#x2715;</button>
                </div>
            </div>
            
            <!-- 2행 -->
            <div class="project-item">
                <div class="pr_img"><img src="./img/pr04.jpg"></div>
                <div class="pr_info">CESCO Product QR<br>2025</div>
                <div class="new_img">
                    <div class="inner"><img src="./img/main4.jpg"></div>
                    <button type="button" class="btn_close">&#x2715;</button>
                </div>
            </div>
            <div class="project-item">
                <div class="pr_img"><img src="./img/pr05.jpg"></div>
                <div class="pr_info">CESCO Promotion<br>2025</div>
                <div class="new_img">
                    <div class="inner">
                        <img src="./img/main5.jpg">
                        <img src="./img/main5_1.jpg">
                    </div>
                    <button type="button" class="btn_close">&#x2715;</button>
                </div>
            </div>
            <div class="project-item">
                <div class="pr_img"><img src="./img/pr06.jpg"></div>
                <div class="pr_info">CESCO Service Report<br>2024</div>
                <div class="new_img">
                    <div class="inner">
                        <img src="./img/main6.jpg">
                        <img src="./img/main6_1.jpg">
                    </div>
                    <button type="button" class="btn_close">&#x2715;</button>
                </div>
            </div>

            <!-- 3행 -->
            <div class="project-item">
                <div class="pr_img"><img src="./img/pr07.jpg"></div>
                <div class="pr_info">CESCO IOT App<br>2022</div>
                <div class="new_img">
                    <div class="inner">
                        <img src="./img/main7.jpeg">
                        <img src="./img/main7_1.jpeg">
                    </div>
                    <button type="button" class="btn_close">&#x2715;</button>
                </div>
            </div>
            <div class="project-item">
                <div class="pr_img"><img src="./img/pr08.jpg"></div>
                <div class="pr_info">CESCO Homepage<br>2022</div>
                <div class="new_img">
                    <div class="inner"><img src="./img/main8.jpg"></div>
                    <button type="button" class="btn_close">&#x2715;</button>
                </div>
            </div>
            <div class="project-item">
                <div class="pr_img"><img src="./img/pr09.jpg"></div>
                <div class="pr_info">CESCO Mall Renewal 9<br>2022</div>
                <div class="new_img">
                    <div class="inner"><img src="./img/main9.png"></div>
                    <button type="button" class="btn_close">&#x2715;</button>
                </div>
            </div>
        </main>
    </div>

    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script>
        // ★★★ 깜빡임 현상 방지를 위한 잠금 장치 변수 ★★★
        let isClosing = false;

        // 팝업을 닫는 공통 함수
        function closePopup(element) {
            if (isClosing) return; // 닫히는 중이면 아무것도 안함
            isClosing = true; // 닫기 시작, 잠금!
            
            $(element).closest('.project-item').removeClass('active');

            // CSS transition 시간(300ms) 후에 잠금을 해제
            setTimeout(function() {
                isClosing = false;
            }, 300);
        }

        // 1. 썸네일(.pr_img) 클릭 -> 팝업 열기
        $('.pr_img').on('click', function() {
            if (isClosing) return; // 닫히는 중에는 열리지 않음
            
            let currentItem = $(this).closest('.project-item');
            if (!currentItem.hasClass('active')) {
                $('.project-item').removeClass('active');
                currentItem.addClass('active');
            }
        });

        // 2. 닫기 버튼(.btn_close) 클릭 -> 팝업 닫기
        $('.btn_close').on('click', function() {
            closePopup(this);
        });

        // 3. 어두운 배경(.new_img) 클릭 -> 팝업 닫기
        $('.new_img').on('click', function(e) {
            if (e.target === this) { // 배경 자신을 클릭했을 때만
                closePopup(this);
            }
        });
    </script>
</body>
</html>